dnsdock:
  image: tonistiigi/dnsdock
  volumes:
    - /var/run/docker.sock:/run/docker.sock
  ports:
    - 172.17.42.1:53:53/udp

controller:
  image: ahosny/controller:0.9.0
  ports:
    - "32319:8765"
  dns: 172.17.42.1
  environment:
    - VALIDATE_INPUT="return true\n"
    - OUTPUT_TO=[{"target"=>"http://basicrvg.basicrvg.docker:8765/do/run","condition"=>"return true"}]
    - DNSDOCK_NAME=controller
    - DNSDOCK_IMAGE=controller

basicrvg:
  image: ahosny/basicreveng:0.9.0
  ports:
    - "32320:8765"
  dns: 172.17.42.1
  environment:
    - VALIDATE_INPUT="return true\n"
    - OUTPUT_TO=[{"target"=>"http://react.react.docker:8765/do/run","condition"=>"return true"}]
    - DNSDOCK_NAME=basicrvg
    - DNSDOCK_IMAGE=basicrvg

react:
  image: ahosny/react:0.9.0
  ports:
    - "32321:8765"
  dns: 172.17.42.1
  environment:
    - VALIDATE_INPUT="return true\n"
    - OUTPUT_TO=[{"target"=>"http://sdds.sdds.docker:8765/do/run","condition"=>"return true"}]
    - DNSDOCK_NAME=react
    - DNSDOCK_IMAGE=react

sdds:
  image: ahosny/sdds:0.9.0
  ports:
    - "32322:8765"
  dns: 172.17.42.1
  environment:
    - VALIDATE_INPUT="return true\n"
    - OUTPUT_TO=[{"target"=>"http://controller.controller.docker:8765/do/done","condition"=>"return true"}]
    - DNSDOCK_NAME=sdds
    - DNSDOCK_IMAGE=sdds
